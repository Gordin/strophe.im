<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Strophe: util.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Strophe
   &#160;<span id="projectnumber">0.8</span>
   </div>
   <div id="projectbrief">XMPP client library</div>
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">util.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ae7ab891499d8c50563b0457856a34e51">xmpp_strdup</a> (const xmpp_ctx_t *const ctx, const char *const s)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">implement our own strdup that uses the ctx allocator  <a href="#ae7ab891499d8c50563b0457856a34e51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ac2f17ea599e5bc41aef1f34c0f16f849">time_stamp</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an integer based time stamp.  <a href="#ac2f17ea599e5bc41aef1f34c0f16f849"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a9cce40a083f7d375b4d9995fed4b62fa">time_elapsed</a> (uint64_t t1, uint64_t t2)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time elapsed between two time stamps.  <a href="#a9cce40a083f7d375b4d9995fed4b62fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ac7e396e1cda3bddb6e0c23f98ae6098d">disconnect_mem_error</a> (xmpp_conn_t *const conn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect the stream with a memory error.  <a href="#ac7e396e1cda3bddb6e0c23f98ae6098d"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Utility functions. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae7ab891499d8c50563b0457856a34e51"></a><!-- doxytag: member="util.c::xmpp_strdup" ref="ae7ab891499d8c50563b0457856a34e51" args="(const xmpp_ctx_t *const ctx, const char *const s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="util_8c.html#ae7ab891499d8c50563b0457856a34e51">xmpp_strdup</a> </td>
          <td>(</td>
          <td class="paramtype">const xmpp_ctx_t *const&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>implement our own strdup that uses the ctx allocator </p>
<p>Duplicate a string. This function replaces the standard strdup library call with a version that uses the Strophe context object's allocator.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>a Strophe context object </td></tr>
    <tr><td class="paramname">s</td><td>a string</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a new allocates string with the same data as s or NULL on error </dd></dl>

</div>
</div>
<a class="anchor" id="ac2f17ea599e5bc41aef1f34c0f16f849"></a><!-- doxytag: member="util.c::time_stamp" ref="ac2f17ea599e5bc41aef1f34c0f16f849" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="util_8h.html#ac2f17ea599e5bc41aef1f34c0f16f849">time_stamp</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return an integer based time stamp. </p>
<p>This function uses gettimeofday or timeGetTime (on Win32 platforms) to compute an integer based time stamp. This is used internally by the event loop and timed handlers.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>an integer time stamp </dd></dl>

</div>
</div>
<a class="anchor" id="a9cce40a083f7d375b4d9995fed4b62fa"></a><!-- doxytag: member="util.c::time_elapsed" ref="a9cce40a083f7d375b4d9995fed4b62fa" args="(uint64_t t1, uint64_t t2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="util_8h.html#a9cce40a083f7d375b4d9995fed4b62fa">time_elapsed</a> </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the time elapsed between two time stamps. </p>
<p>This function returns the time elapsed between t1 and t2 by subtracting t1 from t2. If t2 happened before t1, the result will be negative. This function is used internally by the event loop and timed handlers.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">t1</td><td>first time stamp </td></tr>
    <tr><td class="paramname">t2</td><td>second time stamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of milliseconds between the stamps </dd></dl>

</div>
</div>
<a class="anchor" id="ac7e396e1cda3bddb6e0c23f98ae6098d"></a><!-- doxytag: member="util.c::disconnect_mem_error" ref="ac7e396e1cda3bddb6e0c23f98ae6098d" args="(xmpp_conn_t *const conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="util_8c.html#ac7e396e1cda3bddb6e0c23f98ae6098d">disconnect_mem_error</a> </td>
          <td>(</td>
          <td class="paramtype">xmpp_conn_t *const&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disconnect the stream with a memory error. </p>
<p>This is a convenience function used internally by various parts of the Strophe library for terminating the connection because of a memory error.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>a Strophe connection object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</body>
</html>
